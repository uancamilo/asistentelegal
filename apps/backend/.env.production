# ==========================================
# AsistenciaLegal - Production Environment
# ==========================================
#
# ⚠️ CRITICAL SECURITY WARNING:
# This file contains production-specific configuration.
# DO NOT commit this file with real values!
#
# When deploying:
# 1. Copy this file as reference
# 2. Set variables in your hosting provider's dashboard
#    (Railway Variables, Vercel Env Vars, etc.)
# 3. NEVER commit actual production secrets
# ==========================================

# ==========================================
# DATABASE
# ==========================================
# Use your production PostgreSQL (Neon, AWS RDS, etc.)
DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require&connection_limit=10

# ==========================================
# ADMIN CREDENTIALS (Initial setup only)
# ==========================================
# Generate with: openssl rand -base64 24
ADMIN_EMAIL=admin@yourcompany.com
ADMIN_PASSWORD=GENERATE_NEW_PASSWORD_HERE
SECONDARY_ADMIN_PASSWORD=GENERATE_NEW_PASSWORD_HERE
EDITOR_PASSWORD=GENERATE_NEW_PASSWORD_HERE

# ==========================================
# APPLICATION
# ==========================================
PORT=8080
NODE_ENV=production

# ==========================================
# CORS CONFIGURATION (CRITICAL!)
# ==========================================
# ⚠️ SECURITY REQUIREMENTS FOR PRODUCTION:
# 1. NO wildcards (*) - Use specific domains only
# 2. NO HTTP - HTTPS only
# 3. NO localhost - Production domains only
#
# Examples:
#   ✅ CORS_ORIGIN=https://yourapp.vercel.app
#   ✅ CORS_ORIGIN=https://app.yourdomain.com,https://admin.yourdomain.com
#   ❌ CORS_ORIGIN=http://192.168.*.*:3000 (INSECURE!)
#   ❌ CORS_ORIGIN=http://localhost:3000 (WRONG!)
#   ❌ CORS_ORIGIN=https://*.yourdomain.com (WILDCARDS NOT ALLOWED!)

CORS_ORIGIN=https://yourfrontend.vercel.app
FRONTEND_URL=https://yourfrontend.vercel.app

# ==========================================
# JWT CONFIGURATION
# ==========================================
# Generate with: openssl rand -base64 32
# MUST be different from each other!
JWT_SECRET=GENERATE_WITH_openssl_rand_base64_32
JWT_EXPIRATION=15m
JWT_REFRESH_SECRET=GENERATE_DIFFERENT_VALUE_HERE
JWT_REFRESH_EXPIRATION=7d

# ==========================================
# REDIS (Highly Recommended)
# ==========================================
# Use managed Redis service
# Railway: Built-in addon
# Upstash: Serverless Redis
# Redis Cloud: redis://default:PASSWORD@HOST:PORT
REDIS_URL=redis://default:PASSWORD@your-redis-host:PORT

# ==========================================
# OPENAI
# ==========================================
OPENAI_API_KEY=sk-...
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# ==========================================
# FILE STORAGE
# ==========================================
# Local storage - PDFs are processed and stored as chunks in database
# For Render: Use persistent disk if needed for temp files
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
MAX_FILE_SIZE=52428800
ALLOWED_MIME_TYPES=application/pdf

# ==========================================
# BULL QUEUE
# ==========================================
QUEUE_PDF_CONCURRENCY=2
QUEUE_MAX_RETRIES=3

# ==========================================
# EMAIL CONFIGURATION (SMTP)
# ==========================================
# Required for sending invitation and notification emails
# Configure via your hosting provider's environment variables
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=SG.your-sendgrid-api-key
SMTP_FROM="AsistenciaLegal <noreply@yourdomain.com>"
SMTP_SECURE=false

# ==========================================
# DEPLOYMENT CHECKLIST (Vercel + Render + Neon)
# ==========================================
# Before deploying, verify:
# ✅ NODE_ENV=production
# ✅ CORS_ORIGIN uses HTTPS (no HTTP)
# ✅ CORS_ORIGIN has NO wildcards (*)
# ✅ All secrets generated with openssl
# ✅ JWT_SECRET ≠ JWT_REFRESH_SECRET
# ✅ Redis configured (optional but recommended)
# ✅ SMTP configured for email delivery
# ✅ Database migrations applied: npx prisma migrate deploy
# ✅ Neon database connection with pooler endpoint
# ==========================================
